@isTest
public class createCompetitorTest {
   @TestSetup
   static void createData(){
    GenericMockClass mock= new GenericMockClass (200,'success','{"statusCode":"200","statusMsg":"Record inserted Successfully","data":""}');
        Test.setMock(HttpCalloutMock.class,mock);
        Test.setMock(HttpCalloutMock.class,mock);
        Lead leadRecord =  TestDataFactory.createLeadRecord();
        leadRecord.Industry_Leader__c =UserInfo.getUserId();
        leadRecord.Industry__c ='Banking';
        leadRecord.Email ='Test32@233test.com';
        //leadRecord.IndustryLeaderApprovalStatus__c = 'Approved';
        leadRecord.capIQId__c ='IQ874170';
        leadRecord.MCA_ID__c ='KFI000010857652E';
        insert leadRecord;
        Account acc =TestDataFactory.createAccountRecord();
        acc.Industry__c = 'Banking';
        acc.capIQId__c ='IQ874170';
        insert acc;
   }
    
    @isTest static void testDeleteOldCompetitor(){   
        Test.startTest();
        Lead leadObj  = [SELECT Id,capIQId__c FROM Lead LIMIT 1];
        String body ='{"GDSSDKResponse":[{"ErrMsg":"","Headers":["IQ_COMPETITOR_ALL","AsOfDate"],"NumRows":20,"Seniority":"","Properties":{"endrank":"20","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874170","NumCols":2,"Mnemonic":"IQ_COMPETITOR_ALL","Frequency":"","Limit":"","Rows":[{"Row":["BVC:PAZRIO",""]},{"Row":["NSEI:ADANIPOWER",""]},{"Row":["IQ24183435",""]},{"Row":["NYSE:AA",""]},{"Row":["IQ707318892",""]},{"Row":["IQ22511971",""]},{"Row":["SEHK:347",""]},{"Row":["LSE:AAL",""]},{"Row":["IQ5468473",""]},{"Row":["LSE:ANTO",""]},{"Row":["BSE:533758",""]},{"Row":["IQ223957348",""]},{"Row":["ENXTAM:MT",""]},{"Row":["BSE:540923",""]},{"Row":["IQ59457286",""]},{"Row":["BSE:513142",""]},{"Row":["IQ47016873",""]},{"Row":["IQ257148268",""]},{"Row":["SHSE:600019",""]},{"Row":["IQ115371689",""]}]}]}';
        GenericMockClass mock= new GenericMockClass (200,'success',body);
        Test.setMock(HttpCalloutMock.class,mock);
        createCompetitor.deleteOldCompetitor(leadObj.Id,leadObj.capIQId__c,'Lead');
        Test.stopTest();
    }

    @isTest static void testDeleteOldCompetitor1(){   
        Test.startTest();
        Lead leadObj  = [SELECT Id,capIQId__c FROM Lead LIMIT 1];
        String body ='{"GDSSDKResponse":[{"Function":"GDSP","Mnemonic":"PARENT_NAME","NumCols":1,"NumRows":0,"ErrMsg":"Not Entitled","CacheExpiryTime":"0","Headers":["PARENT_NAME"],"Identifier":"IQ874118","StartDate":"01/01/202","Seniority":"","Frequency":"","SnapType":""},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_TICKER"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_TICKER","Frequency":"","Limit":"","Rows":[{"Row":["BVC:PAZRIO"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_PRIMARY_SIC_INDUSTRY"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_PRIMARY_SIC_INDUSTRY","Frequency":"","Limit":"","Rows":[{"Row":["Steel Works, Blast Furnaces (Including Coke Ovens), and Rolling Mills"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_CEO_NAME"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_CEO_NAME","Frequency":"","Limit":"","Rows":[{"Row":["Noero Arango, Vicente"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_ULT_PARENT"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_ULT_PARENT","Frequency":"","Limit":"","Rows":[{"Row":["Acerías Paz del Río S. A."]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_TYPE"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_TYPE","Frequency":"","Limit":"","Rows":[{"Row":["Public Company"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_PRESIDENT_NAME"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_PRESIDENT_NAME","Frequency":"","Limit":"","Rows":[{"Row":["Data Unavailable"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_SHORT_BUSINESS_DESCRIPTION"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_SHORT_BUSINESS_DESCRIPTION","Frequency":"","Limit":"","Rows":[{"Row":["Acerías Paz del Río S. A. produces and sells steel products in Colombia and internationally."]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_PRIMARY_SIC_CODE"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_PRIMARY_SIC_CODE","Frequency":"","Limit":"","Rows":[{"Row":["3312"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_EXCHANGE"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_EXCHANGE","Frequency":"","Limit":"","Rows":[{"Row":["BVC"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COO_NAME"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COO_NAME","Frequency":"","Limit":"","Rows":[{"Row":["Data Unavailable"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_CFO_NAME"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_CFO_NAME","Frequency":"","Limit":"","Rows":[{"Row":["Cavalcante, Edson"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_STREET2"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_STREET2","Frequency":"","Limit":"","Rows":[{"Row":["Floor 6"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_CITY"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_CITY","Frequency":"","Limit":"","Rows":[{"Row":["Bogotá"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COUNTRY_NAME"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COUNTRY_NAME","Frequency":"","Limit":"","Rows":[{"Row":["Colombia"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_EMPLOYEES"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_EMPLOYEES","Frequency":"","Limit":"","Rows":[{"Row":["277"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_WEBSITE"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_WEBSITE","Frequency":"","Limit":"","Rows":[{"Row":["www.pazdelrio.com.co"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_DESCRIPTION_LONG"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_DESCRIPTION_LONG","Frequency":"","Limit":"","Rows":[{"Row":["Data Unavailable"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_YEAR_FOUNDED"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_YEAR_FOUNDED","Frequency":"","Limit":"","Rows":[{"Row":["1948"]}]},{"ErrMsg":"","Headers":["IQ_COMPETITOR_ALL","AsOfDate"],"NumRows":5,"Seniority":"","Properties":{"endrank":"5","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874118","NumCols":2,"Mnemonic":"IQ_COMPETITOR_ALL","Frequency":"","Limit":"","Rows":[{"Row":["IQ22933392",""]},{"Row":["ENXTAM:MT",""]},{"Row":["IQ5464588",""]},{"Row":["IQ1502373",""]},{"Row":["BOVESPA:CSNA3",""]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_CHAIRMAN_NAME"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_CHAIRMAN_NAME","Frequency":"","Limit":"","Rows":[{"Row":["Obregón Santodomingo, Jorge"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COUNTRY_OF_INC"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COUNTRY_OF_INC","Frequency":"","Limit":"","Rows":[{"Row":["Colombia"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_PHONE"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_PHONE","Frequency":"","Limit":"","Rows":[{"Row":["57 1 651 7300"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_ULT_PARENT_CIQID"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_ULT_PARENT_CIQID","Frequency":"","Limit":"","Rows":[{"Row":["IQ874118"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_NAME"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_NAME","Frequency":"","Limit":"","Rows":[{"Row":["Acerías Paz del Río S. A."]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_ADDRESS"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_ADDRESS","Frequency":"","Limit":"","Rows":[{"Row":["Calle 100 No. 13 - 21, Floor 6, Bogotá    Colombia"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_ZIP"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_ZIP","Frequency":"","Limit":"","Rows":[{"Row":["Data Unavailable"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_STATE"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_STATE","Frequency":"","Limit":"","Rows":[{"Row":["Data Unavailable"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_STREET1"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_STREET1","Frequency":"","Limit":"","Rows":[{"Row":["Calle 100 No. 13 - 21"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_COMPANY_WEBSITE"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_COMPANY_WEBSITE","Frequency":"","Limit":"","Rows":[{"Row":["www.pazdelrio.com.co"]}]},{"Function":"GDSP","Mnemonic":"DOM_ULTIMATE_PARENT_NAME","NumCols":1,"NumRows":0,"ErrMsg":"Not Applicable","CacheExpiryTime":"0","Headers":["DOM_ULTIMATE_PARENT_NAME"],"Identifier":"IQ874118","StartDate":"","Seniority":"","Frequency":"","SnapType":""},{"ErrMsg":"","Headers":["IQ_INVESTORS_ALL","AsOfDate"],"NumRows":5,"Seniority":"","Properties":{"endrank":"5","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874118","NumCols":2,"Mnemonic":"IQ_INVESTORS_ALL","Frequency":"","Limit":"","Rows":[{"Row":["Boyacá Development and Promotion Institute",""]},{"Row":["Gerdau GTL Spain SL",""]},{"Row":["Structure Banca de Inversión",""]},{"Row":["Trinity Capital Inc.",""]},{"Row":["Votorantim Participações S.A.",""]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_PROFESSIONAL_DIRECT_PHONE"],"NumRows":1,"Seniority":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_PROFESSIONAL_DIRECT_PHONE","Frequency":"","Limit":"","Rows":[{"Row":["Data Unavailable"]}]},{"ErrMsg":"","Headers":["IQ_BOARD_MEMBER","AsOfDate"],"NumRows":5,"Seniority":"","Properties":{"endrank":"5","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874118","NumCols":2,"Mnemonic":"IQ_BOARD_MEMBER","Frequency":"","Limit":"","Rows":[{"Row":["Obregón Santodomingo, Jorge Andrés",""]},{"Row":["Ribeiro Pompeu, Adailson ",""]},{"Row":["Roncaniz, Carlos Eduardo Quintero",""]},{"Row":["Domingues, Glaisy Peres",""]},{"Row":["Malacrida, Sergio Augusto",""]}]},{"ErrMsg":"","Headers":["IQ_BOARD_MEMBER_TITLE","AsOfDate"],"NumRows":5,"Seniority":"","Properties":{"endrank":"5","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874118","NumCols":2,"Mnemonic":"IQ_BOARD_MEMBER_TITLE","Frequency":"","Limit":"","Rows":[{"Row":["Chairman",""]},{"Row":["Director",""]},{"Row":["Director",""]},{"Row":["Director",""]},{"Row":["Director",""]}]},{"ErrMsg":"","Headers":["IQ_PROFESSIONAL","AsOfDate"],"NumRows":3,"Seniority":"","Properties":{"endrank":"5","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874118","NumCols":2,"Mnemonic":"IQ_PROFESSIONAL","Frequency":"","Limit":"","Rows":[{"Row":["Noero Arango, Vicente Enrique",""]},{"Row":["Cavalcante, Edson Rocha",""]},{"Row":["Cabra, Angela Francisca Rincon",""]}]},{"ErrMsg":"","Headers":["IQ_PROFESSIONAL_MAIN_PHONE","AsOfDate"],"NumRows":3,"Seniority":"","Properties":{"endrank":"5","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874118","NumCols":2,"Mnemonic":"IQ_PROFESSIONAL_MAIN_PHONE","Frequency":"","Limit":"","Rows":[{"Row":["57 1 651 7300",""]},{"Row":["57 1 651 7300",""]},{"Row":["57 1 651 7300",""]}]},{"ErrMsg":"","Headers":["IQ_PROFESSIONAL_EMAIL","AsOfDate"],"NumRows":3,"Seniority":"","Properties":{"endrank":"5","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874118","NumCols":2,"Mnemonic":"IQ_PROFESSIONAL_EMAIL","Frequency":"","Limit":"","Rows":[{"Row":["Data Unavailable",""]},{"Row":["Data Unavailable",""]},{"Row":["Data Unavailable",""]}]},{"ErrMsg":"","Headers":["IQ_PROFESSIONAL_TITLE","AsOfDate"],"NumRows":3,"Seniority":"","Properties":{"endrank":"5","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874118","NumCols":2,"Mnemonic":"IQ_PROFESSIONAL_TITLE","Frequency":"","Limit":"","Rows":[{"Row":["President",""]},{"Row":["Vice President of Finance & Investor Relations",""]},{"Row":["Director of Administrative & Labor Relations",""]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_EBIT"],"NumRows":1,"Seniority":"","Properties":{"periodtype":"IQ_FY"},"CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_EBIT","Frequency":"","Limit":"","Rows":[{"Row":["95375.675000"]}]},{"Function":"GDSP","Mnemonic":"IQ_TOTAL_EQUITY","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_TOTAL_EQUITY"],"Rows":[{"Row":["1055376.78"]}],"Properties":{"periodtype":"IQ_FY"},"Identifier":"IQ874118","Frequency":""},{"SnapType":"","ErrMsg":"","Headers":["IQ_REV"],"NumRows":1,"Seniority":"","Properties":{"periodtype":"FY2022"},"CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_REV","Frequency":"","Limit":"","Rows":[{"Row":["1605526.196000"]}]},{"Function":"GDSP","Mnemonic":"IQ_TOTAL_ASSETS","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_TOTAL_ASSETS"],"Rows":[{"Row":["2015828.524"]}],"Properties":{"periodtype":"IQ_FY"},"Identifier":"IQ874118","Frequency":""},{"Function":"GDSP","Mnemonic":"IQ_EBITDA","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_EBITDA"],"Rows":[{"Row":["190065.607"]}],"Properties":{"periodtype":"IQ_FY"},"Identifier":"IQ874118","Frequency":""},{"Function":"GDSP","Mnemonic":"IQ_NI","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_NI"],"Rows":[{"Row":["42638.959"]}],"Properties":{"periodtype":"IQ_FY"},"Identifier":"IQ874118","Frequency":""},{"SnapType":"","ErrMsg":"","Headers":["IQ_GP"],"NumRows":1,"Seniority":"","Properties":{"periodtype":"IQ_FY"},"CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_GP","Frequency":"","Limit":"","Rows":[{"Row":["233622.442000"]}]},{"Function":"GDSP","Mnemonic":"IQ_TOTAL_CL","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_TOTAL_CL"],"Rows":[{"Row":["636097.997"]}],"Properties":{"periodtype":"IQ_FY"},"Identifier":"IQ874118","Frequency":""},{"Function":"GDSP","Mnemonic":"IQ_TOTAL_CA","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_TOTAL_CA"],"Rows":[{"Row":["633287.134"]}],"Properties":{"periodtype":"IQ_FY"},"Identifier":"IQ874118","Frequency":""},{"Function":"GDSP","Mnemonic":"IQ_TOTAL_LIAB","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_TOTAL_LIAB"],"Rows":[{"Row":["960451.744"]}],"Properties":{"periodtype":"IQ_FY"},"Identifier":"IQ874118","Frequency":""},{"Function":"GDSP","Mnemonic":"IQ_TOTAL_REV","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_TOTAL_REV"],"Rows":[{"Row":["1605526.196"]}],"Properties":{"periodtype":"IQ_FY"},"Identifier":"IQ874118","Frequency":""},{"Function":"GDSP","Mnemonic":"IQ_TOTAL_DEBT","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_TOTAL_DEBT"],"Rows":[{"Row":["267510.013"]}],"Properties":{"periodtype":"IQ_FY"},"Identifier":"IQ874118","Frequency":""},{"StartDate":"","Function":"GDSP","Identifier":"IQ874118","SnapType":"","NumCols":1,"ErrMsg":"SecondPartyInvalid","Mnemonic":"IQ_HOLDER_NAME","Frequency":"","NumRows":0,"Limit":"","Seniority":"","Properties":{"asofdate":"01/01/2022","endrank":"5","currencyid":"EUR","currencyconversionmodeid":"Historical","startrank":"1"}},{"StartDate":"","Function":"GDSP","Identifier":"IQ874118","SnapType":"","NumCols":1,"ErrMsg":"SecondPartyInvalid","Mnemonic":"IQ_HOLDER_PERCENT","Frequency":"","NumRows":0,"Limit":"","Seniority":"","Properties":{"asofdate":"01/01/2022","endrank":"5","currencyid":"EUR","currencyconversionmodeid":"Historical","startrank":"1"}},{"Function":"GDSP","Mnemonic":"IQ_ISIN","NumCols":1,"NumRows":1,"ErrMsg":"","CacheExpiryTime":"","Headers":["IQ_ISIN"],"Rows":[{"Row":["I_COD12PA00017"]}],"Identifier":"IQ874118","Frequency":""},{"SnapType":"","ErrMsg":"","Headers":["IQ_KEY_DEV_ID"],"NumRows":1,"Seniority":"","Properties":{"enddate":"09/09/2022","keydevfilter":"C2,T36","startdate":"01/01/2022"},"CacheExpiryTime":"0","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_KEY_DEV_ID","Frequency":"","Limit":"","Rows":[{"Row":["IQKD1759085644"]}]},{"SnapType":"","ErrMsg":"","Headers":["IQ_DILUT_EPS_NORM"],"NumRows":1,"Seniority":"","Properties":{"periodtype":"IQ_FY"},"CacheExpiryTime":"0","StartDate":"","Function":"GDSP","Identifier":"IQ874118","NumCols":1,"Mnemonic":"IQ_DILUT_EPS_NORM","Frequency":"","Limit":"","Rows":[{"Row":["1.057826"]}]}]}';
        GenericMockClass mock= new GenericMockClass (200,'success',body);
        Test.setMock(HttpCalloutMock.class,mock);
        createCompetitor.createCompetitorFromCAPIQSingle(leadObj.capIQId__c,leadObj.Id,'Lead');
        Test.stopTest();
    }
    @isTest static void testcreateCompetitorFromMCA(){   
        Test.startTest();
        Lead leadObj  = [SELECT Id,capIQId__c FROM Lead LIMIT 1];
        String body ='{"GDSSDKResponse":[{"ErrMsg":"","Headers":["IQ_COMPETITOR_ALL","AsOfDate"],"NumRows":20,"Seniority":"","Properties":{"endrank":"20","startrank":"1"},"EndDate":"","CacheExpiryTime":"0","StartDate":"","Function":"GDSHE","Identifier":"IQ874170","NumCols":2,"Mnemonic":"IQ_COMPETITOR_ALL","Frequency":"","Limit":"","Rows":[{"Row":["BVC:PAZRIO",""]},{"Row":["NSEI:ADANIPOWER",""]},{"Row":["IQ24183435",""]},{"Row":["NYSE:AA",""]},{"Row":["IQ707318892",""]},{"Row":["IQ22511971",""]},{"Row":["SEHK:347",""]},{"Row":["LSE:AAL",""]},{"Row":["IQ5468473",""]},{"Row":["LSE:ANTO",""]},{"Row":["BSE:533758",""]},{"Row":["IQ223957348",""]},{"Row":["ENXTAM:MT",""]},{"Row":["BSE:540923",""]},{"Row":["IQ59457286",""]},{"Row":["BSE:513142",""]},{"Row":["IQ47016873",""]},{"Row":["IQ257148268",""]},{"Row":["SHSE:600019",""]},{"Row":["IQ115371689",""]}]}]}';
        GenericMockClass mock= new GenericMockClass (200,'success',body);
        Test.setMock(HttpCalloutMock.class,mock);
        createCompetitor.createCompetitorFromMCA(leadObj.Id,leadObj.capIQId__c,'Lead');
        Test.stopTest();
    }

    
}