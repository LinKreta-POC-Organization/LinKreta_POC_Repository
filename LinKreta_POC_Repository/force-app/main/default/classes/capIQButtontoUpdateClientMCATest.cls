@isTest
public class capIQButtontoUpdateClientMCATest {
    @testSetup 
    static void dataCreation() { 
        GenericMockClass mock= new GenericMockClass (200,'success','{"statusCode":"200","statusMsg":"Record inserted Successfully","data":""}');
        Test.setMock(HttpCalloutMock.class,mock);
        Lead leadRecord =  TestDataFactory.createLeadRecord();
        leadRecord.Industry_Leader__c =UserInfo.getUserId();
        leadRecord.Industry__c ='Banking';
        leadRecord.Email ='Test32@233test.com';
        //leadRecord.IndustryLeaderApprovalStatus__c = 'Approved';
        leadRecord.MCA_ID__c='KCO000010573625R';
        leadRecord.External_Database_Source__c = 'MCA'; 
        //leadRecord.EntityId__c='L27100MH1907PLC000260';
        leadRecord.ByPassValidation__c = true;
        leadRecord.Company ='tata steel limited';
        insert leadRecord;

        Account acc =TestDataFactory.createAccountRecord();
        acc.Industry__c = 'Banking';
        acc.MCA_ID__c='KCO000010573625R';
        acc.EntityId__c ='L27102OR1982PLC001091';
        acc.Name ='tata steel limited';
        insert acc;
       

    }
    @isTest static void testUpdateNewClientMCA(){
       
       Test.startTest();
        String body ='{ "requestId": "b8ac5b13-ce55-424a-85cb-883eb46bf488", "result": { "profile": { "name": "TATA LIMITED", "tradeName": null, "formerNames": [], "formerEntityIds": [], "pans": [ "AACCT3346H" ], "contact": null, "email": null, "industry": null, "subIndustry": null, "activityGroup": null, "activityClass": null, "activitySubClass": null, "entityClass": null, "natureOfBusiness": [], "fatherName": null, "registeredAddress": "OLD MODERNISATION BLDG NEXT TO CORPORATE COMMUNICATION A ROAD JAMSHEDPUR JHARKHAND BR 831001 IN", "city": "Jamshedpur", "state": "Jharkhand", "pin": "831001", "dateOfIncorporation": "08-11-2004", "dateOfBirth": null, "entityId": "F02452", "type": "COMPANY", "descriptionOfMainDivision": null, "mainDivisonOfBusinessActivity": null, "addressSource": "mca", "panSource": "mca", "dateOfVatRegistration": null, "emailDomain": null, "constitutionOfBusiness": null }, "management": { "source": "mca", "current": [{"designation":"DIRECTOR"},{"designation":"DIRECTOR"}], "former": [{"designation":"DIRECTOR"},{"designation":"DIRECTOR"},{"designation":"DIRECTOR"}] }, "charges": [], "statutoryRegistration": { "mca": [ { "entityId": "F02452", "activeCompliance": null, "activityClass_": null, "activityGroup_": null, "activitySubClass_": null, "alternateAddress": null, "authorisedCapital": null, "category": null, "class": null, "countryOfIncorporation": "United Kingdom", "dateOfAnnualReturnFiled": null, "dateOfBalanceSheet": null, "dateOfIncorporation": "08-11-2004", "dateOfLastAgm": null, "dateOfStatementOfAccountsAndSolvencyFiled": null, "descriptionOfMainDivision": null, "email": null, "emailDomain": null, "foreignCompanyWithShareCapital": null, "formerBusinesses_": [], "formerEntityIds": [], "formerNames": [], "industry_": null, "isLlpStrikedOffUnderRule37": null, "kid": "KCO000010573625R", "listingStatus": null, "llpStrikedOffUnderRule37OrderDate": null, "llpStrikedOffUnderRule37Source": null, "llpStrikedOffUnderRule37SourcePdfDate": null, "mainDivisonOfBusinessActivity": null, "mcaConstitutionCode_": null, "name": "TATA LIMITED", "numberOfAuthorisedRepresentatives": null, "numberOfDesignatedPartners": null, "numberOfMembers": null, "numberOfPartners": null, "officeDetails": null, "paidUpCapital": null, "pans": [ "AACCT3346H" ], "registeredAddress": "OLD MODERNISATION BLDG NEXT TO CORPORATE COMMUNICATION A ROAD JAMSHEDPUR JHARKHAND BR 831001 IN", "registrationNumber": null, "rocCode": null, "sourceUri": null, "status": "NOT AVAILABLE FOR E-FILING", "subIndustry_": null, "subcategory": null, "timestamp": "2023-11-18 23:17:04.991Z", "totalObligationOfContribution": null, "type_": "FOREIGN_COMPANY", "typeOfOffice": null } ], "gst": [], "iec": [], "tan": [], "lin": [], "lei": [{"entityStatus":"test"}], "leiV2": [], "udyam": [], "exchangeInformation": { "bseSecurity": [], "nseSecurity": [] }, "startupRecognition": [], "pans": [ { "pan": "AACCT3346H", "activatedBy": null, "activationCode": null, "activationDate": null, "address": "OLD MODERNISATION BUILDIN NEXT TO CORP COMMUNICATIO,ARMOURY ROAD,BISTUPUR,JAMSHEDPUR,JHARKHAND,831001", "ancestralFlag": null, "building": "OLD MODERNISATION BUILDIN NEXT TO CORP COMMUNICATIO", "cinllpinSource": null, "citizenFlag": null, "citizenshipCountryCode": null, "city": "JAMSHEDPUR", "commaddrFlag": null, "compType": null, "contactStdCode": null, "country": null, "countryCode": null, "countryCodeIsd": null, "createdBy": null, "createdByUser": null, "createdTimestamp": null, "dateOfBirth": "08-11-2004", "dateOfIssuance": null, "deactivatedBy": null, "deactivationTimestamp": null, "deregisterationReason": null, "dscExpiryDate": null, "dscFlag": null, "email": null, "emailDomain": null, "entityName": null, "errors": null, "faxCode": null, "faxNumber": null, "firstName": null, "foreignStateName": null, "formerNames": null, "formerPans": null, "formerSignatories": null, "gender": null, "identityType": "P", "imagePath": null, "inoperativeStatus": null, "isMigrated": null, "isPanItdInactive": null, "isValidPassport": null, "isdCode": null, "isdCountryCode": null, "kid": "KCO000010573625R", "landlineContactNumber": null, "lastLoginTimestamp": null, "lastLogoutTimestamp": null, "lastName": "TATA LIMITED", "lastUpdatedBy": null, "lastUpdatedTimestamp": null, "localAuthorityType": null, "locality": "BISTUPUR", "loginByAadhaarOtp": null, "logoutCapturedFlag": null, "mcaEntityId": "F02452", "mcaEntityType": "FOREIGN_COMPANY", "messages": null, "middleName": null, "name": "TATA LIMITED", "officeContactNumber": null, "officeCountryCode": null, "panStatus": "ACTIVE", "panType": "COMPANY", "panTypeDescription": null, "passportNumber": null, "passwordChangeTimestamp": null, "passwordResetOptions": null, "passwordResetTimestamp": null, "pincode": "831001", "primaryContactRelationCode": null, "primaryEmailRelationCode": null, "regenerationDate": null, "registrationDate": null, "residentialStatusCode": null, "sec5aFlag": null, "secAccessMessage": null, "secondaryContact": null, "secondaryContactRelationId": null, "secondaryEmailId": null, "secondaryEmailRelationId": null, "secondaryIsdCountryCode": null, "secondaryIsdCountryCodeDigits": null, "secondaryLoginOptions": null, "securedLogin": null, "signatories": [ { "pan": "AAVPH6348F", "panType": "PERSON", "accountNumber": null, "email": "en*****ia@tata.com", "emailDomain": "tata.com", "contact": "99XXXXXX99", "isAadhaarLinkedWithUserId": true, "isAadhaarMobileValidated": false, "isPanExempted": false, "isUidValidated": true, "isDscValid": false, "dtoService": "FP", "extAgencyType": null, "profileDate": null, "hsOptions": null, "role": "CO", "userType": "COM", "userCategory": "HS-1", "requestId": "FOS000999092567", "clientIp": "13.126.167.246", "remarks": "Y", "residentialStatus": null, "foreignEmail": null, "foreignEmailDomain": null, "dematAccountNumber": null, "pincode": null, "designation": null, "din": null, "dateOfBirth": null, "firstName": null, "gender": null, "name": null, "lastName": null, "middleName": null, "residentialStatusCode": null, "verificationStatus": null } ], "sourceIpAddress": null, "spouseName": null, "spousePan": null, "state": "JHARKHAND", "stateCode": null, "street": "ARMOURY ROAD", "timestamp": "2023-06-13 00:00:00.000Z", "transactionNumber": null, "trustType": null, "updatedByUser": null, "userGender": null, "userId": null, "yearMonthOfIssuance": null } ], "epf": [{"website" :"WWW.google.com"}] }, "creditRatings": [], "alerts": { "alertList": [ { "alert": "isSuspendedAtStockExchange", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyStrikedOff", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyUnderStrikeOff", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyUnderLiquidation", "exists": false, "severity": "severe", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isChargeOpenAtArc_", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isChargeClosedAtArc_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isChargeOpenAtSasf_", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isChargeClosedAtSasf_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isShell", "exists": false, "severity": "severe", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isVanishing", "exists": false, "severity": "severe", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyStrikedOffUs248", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isDormant", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyUnderCirp", "exists": false, "severity": "high", "detailsAsPerSource": [] }, { "alert": "isMcaCompanyDefaulter", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isMlm", "exists": false, "severity": "severe", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isNotFiled5inv", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyActiveNonCompliant", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isAddressQualityPoor_", "exists": false, "severity": "low", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isEmailInvalid_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isEmailDisposable_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isDomainInvalid_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isPep", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isFormerPep", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isDinSurrendered", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isDinDisqualified", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isDinDeactivated", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isDinDisabled", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isDinLapsed", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isMcaDirectorDefaulter", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isProclaimedOffender", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstCancelled", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstInactive", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstProvisional", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstUnderCancellation", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstTransactionDefault", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstTransactionDelay", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isIecCancelled", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isIecSuspended", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isIecBlackListed", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isIecInDeniedEntityList", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isTanInactive", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isTanTransactionDefault", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isTanTransactionDelay", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfClosed", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfUnderLiquidation", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfRegisteredWithBifr", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfTransactionDefault", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfTransactionDelay", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isLeiRegistrationDuplicate", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isLeiRegistrationLapsed", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isLeiRegistrationRetired", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseSebiRelaxationForMps", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseCompanyDelisted", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseIlliquidSecurity", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBsePenalSuspended", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseCompanySuspendedMoreThan7Years", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseUnderGsmSurveillance", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseDisciplinaryAction", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseMemberInactive", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseDefaulter", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseExpelled", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseCompanyDelisted", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseCompanySuspendedNonCompliance", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseCompanySuspended", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseUnderGsmSurveillance", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseUnderAsmSurveillance", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseDefaulter", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseExpelled", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseSuspended", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditRatingDowngraded", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditRatingSuspended", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditRatingWithdrawn", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isRatedEntityNonCooperative", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditRatingOutlookNegative", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditWatchWithDevelopingImplication", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditWatchWithNegativeImplication", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isPanInactive", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isBifr" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isIbbi" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isSebiDebarred" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isHawala" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isOffshoreLeak" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isDirectorResigned" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isCompanyUnderProsecution" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isMcaDirectorUnderProsecution" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isGstFraud" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isBankAuction" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isSfioProclaimedOffender" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isSfioConvictedDirector" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isBankDefaulterSuitFiled" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isWilfulBankDefaulter" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isSickUnit" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isBankDefaulterNonSuitFiled" } ], "alertSummary": { "severity": { "severe": 0, "high": 0, "medium": 0, "low": 0 }, "details": { "managementAlerts": [], "entityAlerts": {} } } }, "formerAlerts": null, "statutoryCompliance": { "tan": { "delays": [], "defaults": [] }, "epf": { "delays": [], "defaults": [] }, "gst": { "delays": [], "defaults": [] }, "mca": { "defaulter": [] } } }, "statusCode": 101 }';
       GenericMockClass mock= new GenericMockClass (200,'success',body);
       Test.setMock(HttpCalloutMock.class,mock);
       Lead leadObj = [SELECT Id,Name,MCA_ID__c,EntityId__c FROM Lead LIMIT 1];
       capIQButtontoUpdateClientMCA.updateNewClientMCA(leadObj.Id ,'KCO000008119924Y' ,'tata steel limited','L27102OR1982PLC001091');
       Test.stopTest();
    }

    @isTest static void testNewClientCompanySearchFinanceData(){
       
        Test.startTest();
        String body ='{ "requestId": "c5060c93-0867-468a-baeb-7e48730ef368", "result": { "standalone": [ { "metadata": { "docId": "612a0348f36efc0001136296", "financialYear": "2018-19", "financialStartDate": "2018-04-01", "financialEndDate": "2019-03-31", "dateOfFiling": "2019-08-13", "documentName": "Form AOC-4(XBRL)-13082019_signed", "entityId": "L27102OR1982PLC001091", "formId": "AOC 4 Ind As", "type": "Financial", "lastUpdated": "2021-08-28 17:08:24", "attachmentLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWmJGY3lpNFFCSHlHbWtPT3MyUVNpeGljbWdybEd1K2FoOVJXc0RVcjVpQmVzaWpLTXZ6L0xhVHI0K0N3ZHRzUGNwSllRM3FDZ2V6WFVSd1ZkYzhneEIySUJ1dzM4Y1p6T2F6bFB1OWJCcXhOa0ltckx2cWZENnVQWFZZQ0NBcDYwRXZtUkU4cXFMNU1INHJwNkVXMTN2OWM0OGVvcExWWkliUi9sR1ByNTdYMzR5bW5MVElod2R3MGRnYUN0aVl3UkZGZ3h1ODkyaUFnejRTVkJIa2pjWVNnaENZRXIranBpek85Tlp4TUNobEVpb2NSaHE0OVFYbVBKUmJ6cjVnRFdnanpLTEp4VVBqOUNDeTJCYlIvNzFvMEl5WWVabzRCdloyL0dFZVlXYkFnPT0=", "excelLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWkdubDRkenUxNlBFTEVneXpFZGpkZmNzZEwwTlhyZVFTckwvdCtNcGljamRlY0FUeUJ5aUNxc3hob1NMSGlmNjE0VFFtRGRhYzI0SVp6N1U2TTd3RThaUW9SejRKeE4ydG5IN3BkUEx1MEFtSmJPRmhrQksxcTRUM0FzMWtCRnpmd3FJdmd4SWZXcUw3cTArNFBUS3MrbFhNOTN1aEF0WnpURTVtOHdHc0h0ZjRNL0k0WmFNdWp6YXBzVVBBOW40OUlTS0VJMWNnU2daK2hSd0o1R2Z2RFpJSjFYWGd4ZW12ZUE3dVlzOXV0d29vdWJxM2JONEFzRTlCRUcrWnMzam1Oa0N6SW5hbTB3bmVlUU5lSmR6TCs1bWxjekZtVzdGMVRSOSt1bENCa1JtQVYzRWdGTWV0VTNOWDFSVUNteEJJPQ==", "docLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWUVVOVpTeXM4VzFYWEpPNmdrOG5TSldzV25sNExhN2Vkc1hZUm1HU1hoMVlXMWxjS1lnaTc4L0c1cWFRNUhMSmpBWG4rVHhadWpQOWkzc2NESzd1VVRFR05NYVNtSkhLMWxHV3AyaXEzZTl5R1Z4SlNZQ1lhMFRNL0trM0x2WXJmaDBDUGJCL1dvNndHZjFEa256K2VWb1BDbzhaTVQ4UE4xN3ZJRnNyakgxcElKa1ErdG1nbFVRRXVlZnNTdXNxRFZ1bDJhUjEwRHdWU1l0RnpBYVJ4cEpxNHBtN0tJTGY0enJJdC91ZEdyU0tRcnNvWnIwSXlrODNXQVdOakYxRWpBcXV0MVMyaXQvTGcwWlVIWXBTMzU=" }, "data": { "currentFinancialSummary": { "balSheet": { "capWip": 73939000.0, "cashAndBank": 3473971000.0, "deffTaxLiab": 182048000.0, "investments": 2435780000.0, "nonControllingInterest": 0.0, "otherAssets": 5061829000.0, "otherEquity": 10680723000.0, "othersLiab": 2226057000.0, "propertyPlantAndEquipment": 2197309000.0, "shareCap": 154000000.0, "totalAssets": 13242828000.0, "totalBorr": 0.0, "totalEl": 13242828000.0 }, "cashFlowStat": { "capExpenditure": 846449000.0, "cashAndCashEquivalentsCashFlowStatementAtBeginningOfPeriod": 1124938000.0, "cashAndCashEquivalentsCashFlowStatementAtEndOfPeriod": 1631933000.0, "cashFlowsFromUsedInFinancingActivities": -371310000.0, "cashFlowsFromUsedInInvestingActivities": -124333000.0, "cashFlowsFromUsedInOperatingActivities": 1002638000.0, "freeCashFlow": 156189000.0, "increaseDecreaseInCashAndCashEquivalents": 506995000.0 }, "incomeState": { "deprcnAmort": 115790000.0, "ebit": 1331238000.0, "ebitda": 1447028000.0, "effTaxRate": 0.3378371685167541, "exceptionalItemsBeforeTax": 0.0, "finCost": 30218000.0, "otherIncome": 576639000.0, "profLossBefTax": 1877659000.0, "profitLoss": 1243316000.0, "revenueFromOperations": 9920530000.0, "shareAssocJointVent": 0.0, "totExp": 8473502000.0, "totalTaxExpense": 634343000.0 }, "ratAnalysis": { "ebitdaGrowth": -0.2080656433562262, "ebitdaMargin": 0.1458619650361422, "interestCoverage": 44.05447084519161, "netDebtEquity": -0.3206331163242475, "netOpIncGrowth": 0.21479040964413684, "netProfGrowth": -0.11732102961086094, "netProfitMargin": 0.12532757826446772, "returnOnEquity": 0.12013305194752805, "roce": 0.12501798396975614 } }, "finParamBalanceSheet": { "amountIssueAll": null, "conversionWrDe": null, "commercialPaper": null, "rbOperatingLea": null, "miscExpenditure": null, "amtDueTransfer": null, "grossValue": null, "interCorpBorr1": null, "goodwillConsl": null, "defaultPayment1": null, "securedLoan": null, "borrowingFia": null, "debenturesClaim": null, "warrantsIssued": null, "forfeitedShares": null, "interestDeposit": null, "paidUpCaptFc1Percent": null, "numShareHoldrs": null, "depMaturedCla1": null, "depMaturedCla2": null, "defaultPayment": null, "shareAppMoney3": null, "netWorth": 10834723000, "conversionWrPs": null, "interCorporate": null, "unpaidDividend": null, "capitalReserves": null, "depreciatnAmort": null, "paidUpCaptFcPercent": null, "paidUpCaptFc1": null, "investmentJoint": null, "borrowingFc": null, "conversionWrEs": null, "numSharesBb": null, "investmentSubsd": null, "paidUpCaptFc": null, "investmentGovt": null, "shareAppMoney": null, "warrantsIssued1": null, "investmentAssoc": null, "forfeitedSharR": null, "callsUnpaidDir": null, "depMaturedClai": null, "shareAppMoney1": null, "shareAppMoney2": null, "grossFixdAsset": 2861195000, "interCorpBorr": null, "unclaimedMDeb": null, "callsUnpaidOth": null, "depAcceptedRen": null, "unhedgedFeExp": null, "capitalSubsdies": null }, "finParamProfitLoss": { "revSubsidies": null, "propDiv": null, "propDividendPer": 0.0, "incomeFor": null, "consumptnStores": null, "expenFor": null, "propDividend": null, "grossValueTransn": 0, "badDebtsRP": null, "dilutedEpsPL": null, "basicEpsPL": null, "rentPaid": null, "empBenefitExp": 448675000.0, "badDebtsRp": 0 }, "tradeReceivables": { "withinSixMonths": { "doubtfulWithSix": null, "netTrdRecWithSix": null, "debtsDueDirWithSix": null, "totTrdRecWithSix": null, "securedGoodWithSix": null, "unsecuredGoodWithSix": null, "provisionForBadAndDoubtfulDebtsWithSix": null }, "exceedingSixMonths": { "netTrdRecExSix": null, "provisionForBadAndDoubtfulDebtsExSix": null, "debtsDueDirExSix": null, "unsecuredGoodExSix": null, "doubtfulExSix": null, "securedGoodExSix": null, "totTrdRecExSix": null } }, "cdrFlag": false } } ], "consolidated": null, "companyInfo": { "entityId": "L27102OR1982PLC001091", "regAddOfEntity": "P.O-Joda KEONJHAR Orissa 758034 India", "registrationDateOfCompany": null, "entityEmailId": "sankar.bhattacharya@tatasteellp.com", "entityName": "TATA STEEL LONG PRODUCTS LIMITED" } }, "statusCode": 101 }';
        GenericMockClass mock= new GenericMockClass (200,'success',body);
        Test.setMock(HttpCalloutMock.class,mock);
        Lead leadObj = [SELECT Id,Name,MCA_ID__c,EntityId__c FROM Lead LIMIT 1];
        capIQButtontoUpdateClientMCA.newClientCompanySearchFinanceData(leadObj.Id,'L27102OR1982PLC001091');
        Test.stopTest();
     }
     @isTest static void testNewClientCompanySearchCorpFinanceData(){
       
        Test.startTest();
       String body ='{ "requestId": "fa1d381a-6ab0-4732-a1b5-67826ac1e85a", "result": { "financial": [ { "data": { "signatories": { "signedFinStatements": [ { "dateSigningFS1": "2019-04-18", "dinPan1": "00256832", "directorName1": "SANJAY", "dtlsOfDsgtn1": "MANAGING DIRECTOR", "lastNameOfDirector": "PATTNAIK", "middleNameOfDirector": "KUMAR" } ] }, "current": { "balanceSheet": { "assets": { "bankBalanceOtherThanCashAndCashEquivalents": 1842038000, "biologicalAssetsOtherThanBearerPlants": null, "capWip": 73939000, "cashEqui": 1631933000, "currInv": 1209623000, "currentTaxAssets": null, "deferredTaxAssetsNet": 297373000, "goodwill": null, "intangAsset": 5911000, "intangAssetAud": null, "inventory": 1152769000, "investmentProperty": null, "investmentsAccountedForUsingEquityMethod": null, "loansCurrent": 22703000, "loansNonCurrent": 1128000, "nonCurrInv": 1226157000, "nonCurrentFinancialAssets": 1235930000, "noncurrentAssetsClassifiedAsHeldForSale": null, "othCurrAsset": 177113000, "othNonCurrAsset": 2482236000, "otherCurrentFinancialAssets": 129406000, "otherNonCurrentFinancialAssets": 8645000, "propertyPlantAndEquipment": 2197309000, "regulatoryDeferralAccountDebitBalancesAndRelatedDeferredTaxAssets": null, "totalAssets": 13242828000, "totalCurrentAssets": 6950130000, "totalCurrentFinancialAssets": 5620248000, "totalNonCurrentAssets": 6292698000, "tradeRec": 784545000, "tradeReceivablesNonCurrent": null }, "date": "2019-03-31", "equityLiabilities": { "borrowingsCurrent": 0, "borrowingsNonCurrent": 0, "currentFinancialLiabilities": 793532000, "currentLiabilties": 2107054000, "currentTaxLiabilities": 539033000, "deferredGovernmentGrantsCurrent": null, "deferredGovernmentGrantsNoncurrent": null, "deffTaxLiab": 182048000, "liabilitiesDirectlyAssociatedWithAssetsInDisposalGroupClassifiedAsHeldForSale": null, "nonControllingInterest": 0, "nonCurrentFinancialLiabilities": 0, "otherCurrentFinancialLiabilities": 42523000, "otherCurrentLiabilities": 224776000, "otherEquity": 10680723000, "otherNonCurrentFinancialLiabilities": null, "otherNonCurrentLiabilities": null, "provisionsCurrent": 549713000, "provisionsNonCurrent": 119003000, "regulatoryDeferralAccountCreditBalancesAndRelatedDeferredTaxLiability": null, "shareCap": 154000000, "totalEl": 13242828000, "totalEquity": 10834723000, "totalEquityAttributableToOwnersOfParent": 10834723000, "totalLiabilities": 2408105000, "totalNonCurrentLiabilities": 301051000, "tradePay": 751009000, "tradePayablesNoncurrent": null } }, "cashFlowStatement": { "cashFlowsFromUsedInOperatingActivities": { "adjustmentsForDecreaseIncreaseInInventories": -311882000, "shareOfProfitAndLossFromPartnershipFirmOrAssociationOfPersonsOrLimitedLiabilityPartnerships": 2517000 }, "effectOfExchangeRateChangesOnCashAndCashEquivalents": { "cashAndCashEquivalentsCashFlowStatementAtEndOfPeriod": 1631933000, "effectOfExchangeRateChangesOnCashAndCashEquivalents": null, "increaseDecreaseInCashAndCashEquivalents": 506995000 }, "whetherCashFlowStatementIsApplicableOnCompany": true }, "profitAndLoss": { "basicEarningsLossPerShareFromContinuingOperations": 0, "basicEarningsLossPerShareFromDiscontinuedOperations": 80.73, "currTax": 657500000, "deffTax": -23157000, "dilutedEarningsLossPerShareFromContinuingOperations": 80.73, "dilutedEarningsLossPerShareFromDiscontinuedOperations": null, "exceptionalItemsBeforeTax": null, "expenses": { "changesInInventoriesOfFinishedGoodsWorkInProgressAndStockInTrade": 1383000, "costMaterial": 7086877000, "deprcnAmort": 115790000, "empBenefitExp": 448675000, "expenditureOnProductionTransportationAndOtherExpenditurePertainingToExplorationAndProductionActivities": 0, "finCost": 30218000, "othExp": 936567000, "purchaseStock": null, "totExp": 8619510000 }, "extraordItem": null, "fromDate": "2018-04-01", "netMovementInRegulatoryDeferralAccountBalancesRelatedToProfitOrLossAndTheRelatedDeferredTaxMovement": null, "otherComprehensiveIncome": { "aggregatedIncomeTaxRelatingToComponentsOfOtherComprehensiveIncomeThatWillBeReclassifiedToProfitOrLoss": null, "whetherCompanyHasOtherComprehensiveIncomeOCIComponentsPresentedNetOfTax": true }, "profLossBefTax": 1877659000, "profitBfrExtr": null, "profitBfrExtrExcept": 1877659000, "profitLoss": 1243316000, "profitLossContOprtn": 1243316000, "profitLossFromDiscontinuedOperationsAfterTax": 0, "profitLossFromDiscontinuedOperationsBeforeTax": null, "profitOrLossAttributableToNonControllingInterests": null, "profitOrLossAttributableToOwnersOfParent": 1243316000, "revenue": { "otherIncome": 576639000, "revenueFromOperations": 9920530000, "salGoodsDom": null, "salGoodsExp": null, "salGoodsTrdDom": null, "salGoodsTrdExp": null, "salSuppServiceDom": null, "salSuppServiceExp": null, "totalRev": 10497169000 }, "shareOfProfitLossOfAssociates": null, "shareOfProfitLossOfAssociatesAndJointVenturesAccountedForUsingEquityMethod": null, "taxExpenseOfDiscontinuedOperations": 0, "toDate": "2019-03-31", "totalBasicEarningsLossPerShare": 80.73, "totalDilutedEarningsLossPerShare": 80.73, "totalTaxExpense": 634343000 }, "ratios": { "cashConversionCycle": 40.01968628325947, "cashFlowCoverage": 0.41635975175501067, "cashFlowMargin": 0.10106697928437292, "cashRatio": 0.7745093386310935, "currentLiabilityCoverage": 0.47584826966940574, "currentRatio": 3.2985058759766006, "daysOfInventoryOutstanding": 51.330258765903054, "daysOfPayablesOutstanding": 36.561097152192495, "daysOfSalesOutstanding": 25.250524669548906, "daysWorkingCapital": 184.99525982986796, "debtCapital": 0, "debtEquity": 0, "debtToEbitda": 0, "ebitdaCoverage": 47.88629293798398, "ebitdaMargin": 0.1458619650361422, "equityMultiplier": 1.2222581047988028, "grossProfitMargin": 0.28549583540395523, "interestCoverage": 44.05447084519161, "inventoryTurnover": 7.11081550678753, "longTermDebtCoverage": null, "netProfitMargin": 0.12532757826446772, "netSalesGrowth": null, "netWorthGrowth": 0.0983817336526004, "operatingProfitMargin": 0.1341902095956567, "payablesTurnover": 9.983289026601645, "quickRatio": 2.751405991493336, "receivablesTurnover": 14.455145181207858, "returnOnAssets": 0.09795581999618676, "returnOnEquity": 0.12013305194752805, "totalAssetTurnover": 0.7815982830967917, "totalAssetsGrowth": 0.09062581635345597, "totalLiabilitiesGrowth": null, "workingCapitalTurnover": 1.9730235268496854 } }, "principalProduct": { "disclosureOfPrincipalProductOrService": [ { "descriptionOfProductOrService": "Sponge Iron", "descriptionOfProductOrServiceCategory": "Sponge Iron", "highestTurnoverContributingProductOrServiceITC8DigitCode": "72031000", "productOrServiceCategoryITC4DigitCode": "7203", "quantityOfHighestContributingProductOrServiceInUom": null, "turnoverOfHighestContributingProductOrService": 9406000, "turnoverOfProductOrServiceCategory": 9406000, "unitOfMeasurementOfHighestContributingProductOrService": null } ] }, "statementOfSolvency": null, "financialStartDate": "2018-04-01", "financialEndDate": "2019-03-31" }, "metadata": { "companyID": "L27102OR1982PLC001091", "categoryCode": "ARBE", "documentName": "Form AOC-4(XBRL)-13082019_signed", "dateOfFiling": "13-08-2019", "formId": "AOC 4 IND AS", "type": "FINANCIAL", "docId": "612a0348f36efc0001136296", "lastUpdated": "28-08-2021 17:45:24", "docLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWUVVOVpTeXM4VzFYWEpPNmdrOG5TSldzV25sNExhN2Vkc1hZUm1HU1hoMVlXMWxjS1lnaTc4L0c1cWFRNUhMSmpBWG4rVHhadWpQOWkzc2NESzd1VVRSZkNJQzFkbWh5OUpMVW1SS1JyWHdZTit1NEtCSWxsZGhOSmRCRnlqOHhvR0VLRDQ0VU9ROWFiWWpySFF0VThrc1BBNW4xNGlMYzZTMzJ4dEZ0RlBGL1pRQm1JckRneGNDeDdGcjJ1SVhwRDM5cks1b2ptOVFEY0NzWWRMZzhOMmNKQ0owelQzV3NZVGlIeE5kK2tEaFlMbElDVk1KUEdSYTJzUy9YL21Va3c2NmZrNVJVZmdDU0VmQ0FSNmxNc0U=", "excelLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWkdubDRkenUxNlBFTEVneXpFZGpkZmNzZEwwTlhyZVFTckwvdCtNcGljamRlY0FUeUJ5aUNxc3hob1NMSGlmNjE0VFFtRGRhYzI0SVp6N1U2TTd3RThaUW9SejRKeE4ydG5IN3BkUEx1MEFtSmJPRmhrQksxcTRUM0FzMWtCRnpkTFBSSFp0SGVSNkxpNkRFQlN5RGMwQXBFTXZSZk0vUEVjdXcyMjBNdTRjTHNFaWVaU0U2eFZsTTluTWtDajRqRWZ1N0ZXbWVULzJReGd2UXNaSEZpVmUxbk9NcEhmSmU0cnZUSWVDYlIrYkxvR3VHVlVyRHRJQ05idkxocVFOODZLYnd0V2tuZktlVmU2eGFFeE4xTStTSzVpRTlPdE5kVkQ3OHZva0ZXOTFhR1F4MC9DeUtnYUJ6MXNVSUZ6SWNZPQ==", "attachmentLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWmJGY3lpNFFCSHlHbWtPT3MyUVNpeGljbWdybEd1K2FoOVJXc0RVcjVpQmVzaWpLTXZ6L0xhVHI0K0N3ZHRzUGNwSllRM3FDZ2V6WFVSd1ZkYzhneEIySUJ1dzM4Y1p6T2F6bFB1OWJCcXhITnQ5eDlWeTFRcHY2M0ZzZ0NUNXhBbDVCUHlhaUxSY0xSRU82WSt5MkI4dnVDQ1JGQ0QvdUZRT2dUU1lBd01vK251aWhEbGJENm9JU25ERnlXNStlSXVPRmh3TUVNbmMyVVpYbjdodlczUWhSY1pKME9TRXlEeHkwQ1VmbUovZ1k4Ky9zNGpHYmY2YS9GSytwWDI2Zzh3QTZBUjFoM2ltNC8yY1R6UlZuUnEzUUZDT2x3S3FCTVJUK0hUNXBtMEt3PT0=" } } ], "consolidatedFinancial": [], "companyName": "TATA SPONGE IRON LIMITED", "entityId": "L27102OR1982PLC001091", "lastDownloaded": "27-10-2023", "mergedFinancials": "https://download.karza.in/mca/ZFhUajljdSsvbGxYZ243SXBhNTFDZGNKMXJKQi85RHlQK2RzNmV1ZStPcmRQK1AxRlp5RVVlQUdQQko1UjQ4dmpaN3k5YmU2di9BMURJYWdyM29XWVFQaTcyaHdpS09SdGFmMUNRdXFSUXhUTm9CY3FnakJHQnpTK21Jbit6U2E0eENZemVLcGxJMmhCbXRhQUMwMDltdTBUc3NCbVdQdE5xQ0ZGbjd1Tm1iYkxkNHVOUWZYOFQxNU1tT3ROSUhROTg0K3RUK0FpU3BFTGVJd0o3b1YzTlRYbk5KQjJoUytadXR4MGZZeFZadklySkJaRU5vaGZZY2N4bndpUGROL0xuRi9yRUNmOFh4dkt0eU1qQndRbkE9PQ==" }, "statusCode": 101 }';
        GenericMockClass mock= new GenericMockClass (200,'success',body);
        Test.setMock(HttpCalloutMock.class,mock);
        Lead leadObj = [SELECT Id,Name,MCA_ID__c,EntityId__c FROM Lead LIMIT 1];
        capIQButtontoUpdateClientMCA.newClientCompanySearchCorpFinanceData(leadObj.Id , 'L27102OR1982PLC001091');
        Test.stopTest();
     }

     @isTest static void testupdateAccountCompanySearchFinanceData(){
       
      Test.startTest();
      String body ='{ "requestId": "c5060c93-0867-468a-baeb-7e48730ef368", "result": { "standalone": [ { "metadata": { "docId": "612a0348f36efc0001136296", "financialYear": "2018-19", "financialStartDate": "2018-04-01", "financialEndDate": "2019-03-31", "dateOfFiling": "2019-08-13", "documentName": "Form AOC-4(XBRL)-13082019_signed", "entityId": "L27102OR1982PLC001091", "formId": "AOC 4 Ind As", "type": "Financial", "lastUpdated": "2021-08-28 17:08:24", "attachmentLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWmJGY3lpNFFCSHlHbWtPT3MyUVNpeGljbWdybEd1K2FoOVJXc0RVcjVpQmVzaWpLTXZ6L0xhVHI0K0N3ZHRzUGNwSllRM3FDZ2V6WFVSd1ZkYzhneEIySUJ1dzM4Y1p6T2F6bFB1OWJCcXhOa0ltckx2cWZENnVQWFZZQ0NBcDYwRXZtUkU4cXFMNU1INHJwNkVXMTN2OWM0OGVvcExWWkliUi9sR1ByNTdYMzR5bW5MVElod2R3MGRnYUN0aVl3UkZGZ3h1ODkyaUFnejRTVkJIa2pjWVNnaENZRXIranBpek85Tlp4TUNobEVpb2NSaHE0OVFYbVBKUmJ6cjVnRFdnanpLTEp4VVBqOUNDeTJCYlIvNzFvMEl5WWVabzRCdloyL0dFZVlXYkFnPT0=", "excelLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWkdubDRkenUxNlBFTEVneXpFZGpkZmNzZEwwTlhyZVFTckwvdCtNcGljamRlY0FUeUJ5aUNxc3hob1NMSGlmNjE0VFFtRGRhYzI0SVp6N1U2TTd3RThaUW9SejRKeE4ydG5IN3BkUEx1MEFtSmJPRmhrQksxcTRUM0FzMWtCRnpmd3FJdmd4SWZXcUw3cTArNFBUS3MrbFhNOTN1aEF0WnpURTVtOHdHc0h0ZjRNL0k0WmFNdWp6YXBzVVBBOW40OUlTS0VJMWNnU2daK2hSd0o1R2Z2RFpJSjFYWGd4ZW12ZUE3dVlzOXV0d29vdWJxM2JONEFzRTlCRUcrWnMzam1Oa0N6SW5hbTB3bmVlUU5lSmR6TCs1bWxjekZtVzdGMVRSOSt1bENCa1JtQVYzRWdGTWV0VTNOWDFSVUNteEJJPQ==", "docLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWUVVOVpTeXM4VzFYWEpPNmdrOG5TSldzV25sNExhN2Vkc1hZUm1HU1hoMVlXMWxjS1lnaTc4L0c1cWFRNUhMSmpBWG4rVHhadWpQOWkzc2NESzd1VVRFR05NYVNtSkhLMWxHV3AyaXEzZTl5R1Z4SlNZQ1lhMFRNL0trM0x2WXJmaDBDUGJCL1dvNndHZjFEa256K2VWb1BDbzhaTVQ4UE4xN3ZJRnNyakgxcElKa1ErdG1nbFVRRXVlZnNTdXNxRFZ1bDJhUjEwRHdWU1l0RnpBYVJ4cEpxNHBtN0tJTGY0enJJdC91ZEdyU0tRcnNvWnIwSXlrODNXQVdOakYxRWpBcXV0MVMyaXQvTGcwWlVIWXBTMzU=" }, "data": { "currentFinancialSummary": { "balSheet": { "capWip": 73939000.0, "cashAndBank": 3473971000.0, "deffTaxLiab": 182048000.0, "investments": 2435780000.0, "nonControllingInterest": 0.0, "otherAssets": 5061829000.0, "otherEquity": 10680723000.0, "othersLiab": 2226057000.0, "propertyPlantAndEquipment": 2197309000.0, "shareCap": 154000000.0, "totalAssets": 13242828000.0, "totalBorr": 0.0, "totalEl": 13242828000.0 }, "cashFlowStat": { "capExpenditure": 846449000.0, "cashAndCashEquivalentsCashFlowStatementAtBeginningOfPeriod": 1124938000.0, "cashAndCashEquivalentsCashFlowStatementAtEndOfPeriod": 1631933000.0, "cashFlowsFromUsedInFinancingActivities": -371310000.0, "cashFlowsFromUsedInInvestingActivities": -124333000.0, "cashFlowsFromUsedInOperatingActivities": 1002638000.0, "freeCashFlow": 156189000.0, "increaseDecreaseInCashAndCashEquivalents": 506995000.0 }, "incomeState": { "deprcnAmort": 115790000.0, "ebit": 1331238000.0, "ebitda": 1447028000.0, "effTaxRate": 0.3378371685167541, "exceptionalItemsBeforeTax": 0.0, "finCost": 30218000.0, "otherIncome": 576639000.0, "profLossBefTax": 1877659000.0, "profitLoss": 1243316000.0, "revenueFromOperations": 9920530000.0, "shareAssocJointVent": 0.0, "totExp": 8473502000.0, "totalTaxExpense": 634343000.0 }, "ratAnalysis": { "ebitdaGrowth": -0.2080656433562262, "ebitdaMargin": 0.1458619650361422, "interestCoverage": 44.05447084519161, "netDebtEquity": -0.3206331163242475, "netOpIncGrowth": 0.21479040964413684, "netProfGrowth": -0.11732102961086094, "netProfitMargin": 0.12532757826446772, "returnOnEquity": 0.12013305194752805, "roce": 0.12501798396975614 } }, "finParamBalanceSheet": { "amountIssueAll": null, "conversionWrDe": null, "commercialPaper": null, "rbOperatingLea": null, "miscExpenditure": null, "amtDueTransfer": null, "grossValue": null, "interCorpBorr1": null, "goodwillConsl": null, "defaultPayment1": null, "securedLoan": null, "borrowingFia": null, "debenturesClaim": null, "warrantsIssued": null, "forfeitedShares": null, "interestDeposit": null, "paidUpCaptFc1Percent": null, "numShareHoldrs": null, "depMaturedCla1": null, "depMaturedCla2": null, "defaultPayment": null, "shareAppMoney3": null, "netWorth": 10834723000, "conversionWrPs": null, "interCorporate": null, "unpaidDividend": null, "capitalReserves": null, "depreciatnAmort": null, "paidUpCaptFcPercent": null, "paidUpCaptFc1": null, "investmentJoint": null, "borrowingFc": null, "conversionWrEs": null, "numSharesBb": null, "investmentSubsd": null, "paidUpCaptFc": null, "investmentGovt": null, "shareAppMoney": null, "warrantsIssued1": null, "investmentAssoc": null, "forfeitedSharR": null, "callsUnpaidDir": null, "depMaturedClai": null, "shareAppMoney1": null, "shareAppMoney2": null, "grossFixdAsset": 2861195000, "interCorpBorr": null, "unclaimedMDeb": null, "callsUnpaidOth": null, "depAcceptedRen": null, "unhedgedFeExp": null, "capitalSubsdies": null }, "finParamProfitLoss": { "revSubsidies": null, "propDiv": null, "propDividendPer": 0.0, "incomeFor": null, "consumptnStores": null, "expenFor": null, "propDividend": null, "grossValueTransn": 0, "badDebtsRP": null, "dilutedEpsPL": null, "basicEpsPL": null, "rentPaid": null, "empBenefitExp": 448675000.0, "badDebtsRp": 0 }, "tradeReceivables": { "withinSixMonths": { "doubtfulWithSix": null, "netTrdRecWithSix": null, "debtsDueDirWithSix": null, "totTrdRecWithSix": null, "securedGoodWithSix": null, "unsecuredGoodWithSix": null, "provisionForBadAndDoubtfulDebtsWithSix": null }, "exceedingSixMonths": { "netTrdRecExSix": null, "provisionForBadAndDoubtfulDebtsExSix": null, "debtsDueDirExSix": null, "unsecuredGoodExSix": null, "doubtfulExSix": null, "securedGoodExSix": null, "totTrdRecExSix": null } }, "cdrFlag": false } } ], "consolidated": null, "companyInfo": { "entityId": "L27102OR1982PLC001091", "regAddOfEntity": "P.O-Joda KEONJHAR Orissa 758034 India", "registrationDateOfCompany": null, "entityEmailId": "sankar.bhattacharya@tatasteellp.com", "entityName": "TATA STEEL LONG PRODUCTS LIMITED" } }, "statusCode": 101 }';
      GenericMockClass mock= new GenericMockClass (200,'success',body);
      Test.setMock(HttpCalloutMock.class,mock);
      Account  acc = [SELECT Id,Name,MCA_ID__c FROM Account LIMIT 1];
      capIQButtontoUpdateClientMCA.updateAccountCompanySearchFinanceData(acc.Id,'L27102OR1982PLC001091');
      Test.stopTest();
   }

   @isTest static void testUpdateAcountFromMCA(){
       
      Test.startTest();
       String body ='{ "requestId": "b8ac5b13-ce55-424a-85cb-883eb46bf488", "result": { "profile": { "name": "TATA LIMITED", "tradeName": null, "formerNames": [], "formerEntityIds": [], "pans": [ "AACCT3346H" ], "contact": null, "email": null, "industry": null, "subIndustry": null, "activityGroup": null, "activityClass": null, "activitySubClass": null, "entityClass": null, "natureOfBusiness": [], "fatherName": null, "registeredAddress": "OLD MODERNISATION BLDG NEXT TO CORPORATE COMMUNICATION A ROAD JAMSHEDPUR JHARKHAND BR 831001 IN", "city": "Jamshedpur", "state": "Jharkhand", "pin": "831001", "dateOfIncorporation": "08-11-2004", "dateOfBirth": null, "entityId": "F02452", "type": "COMPANY", "descriptionOfMainDivision": null, "mainDivisonOfBusinessActivity": null, "addressSource": "mca", "panSource": "mca", "dateOfVatRegistration": null, "emailDomain": null, "constitutionOfBusiness": null }, "management": { "source": "mca", "current": [ { "designation": "DIRECTOR" }, { "designation": "DIRECTOR" } ], "former": [ { "name": "test", "email": "test@test.com" } ] }, "charges": [], "statutoryRegistration": { "mca": [ { "entityId": "F02452", "activeCompliance": null, "activityClass_": null, "activityGroup_": null, "activitySubClass_": null, "alternateAddress": null, "authorisedCapital": null, "category": null, "class": null, "countryOfIncorporation": "United Kingdom", "dateOfAnnualReturnFiled": null, "dateOfBalanceSheet": null, "dateOfIncorporation": "08-11-2004", "dateOfLastAgm": null, "dateOfStatementOfAccountsAndSolvencyFiled": null, "descriptionOfMainDivision": null, "email": null, "emailDomain": null, "foreignCompanyWithShareCapital": null, "formerBusinesses_": [], "formerEntityIds": [], "formerNames": [], "industry_": null, "isLlpStrikedOffUnderRule37": null, "kid": "KCO000010573625R", "listingStatus": null, "llpStrikedOffUnderRule37OrderDate": null, "llpStrikedOffUnderRule37Source": null, "llpStrikedOffUnderRule37SourcePdfDate": null, "mainDivisonOfBusinessActivity": null, "mcaConstitutionCode_": null, "name": "TATA LIMITED", "numberOfAuthorisedRepresentatives": null, "numberOfDesignatedPartners": null, "numberOfMembers": null, "numberOfPartners": null, "officeDetails": null, "paidUpCapital": null, "pans": [ "AACCT3346H" ], "registeredAddress": "OLD MODERNISATION BLDG NEXT TO CORPORATE COMMUNICATION A ROAD JAMSHEDPUR JHARKHAND BR 831001 IN", "registrationNumber": null, "rocCode": null, "sourceUri": null, "status": "NOT AVAILABLE FOR E-FILING", "subIndustry_": null, "subcategory": null, "timestamp": "2023-11-18 23:17:04.991Z", "totalObligationOfContribution": null, "type_": "FOREIGN_COMPANY", "typeOfOffice": null } ], "gst": [], "iec": [], "tan": [], "lin": [], "lei": [], "leiV2": [], "udyam": [], "exchangeInformation": { "bseSecurity": [], "nseSecurity": [] }, "startupRecognition": [], "pans": [ { "pan": "AACCT3346H", "activatedBy": null, "activationCode": null, "activationDate": null, "address": "OLD MODERNISATION BUILDIN NEXT TO CORP COMMUNICATIO,ARMOURY ROAD,BISTUPUR,JAMSHEDPUR,JHARKHAND,831001", "ancestralFlag": null, "building": "OLD MODERNISATION BUILDIN NEXT TO CORP COMMUNICATIO", "cinllpinSource": null, "citizenFlag": null, "citizenshipCountryCode": null, "city": "JAMSHEDPUR", "commaddrFlag": null, "compType": null, "contactStdCode": null, "country": null, "countryCode": null, "countryCodeIsd": null, "createdBy": null, "createdByUser": null, "createdTimestamp": null, "dateOfBirth": "08-11-2004", "dateOfIssuance": null, "deactivatedBy": null, "deactivationTimestamp": null, "deregisterationReason": null, "dscExpiryDate": null, "dscFlag": null, "email": null, "emailDomain": null, "entityName": null, "errors": null, "faxCode": null, "faxNumber": null, "firstName": null, "foreignStateName": null, "formerNames": null, "formerPans": null, "formerSignatories": null, "gender": null, "identityType": "P", "imagePath": null, "inoperativeStatus": null, "isMigrated": null, "isPanItdInactive": null, "isValidPassport": null, "isdCode": null, "isdCountryCode": null, "kid": "KCO000010573625R", "landlineContactNumber": null, "lastLoginTimestamp": null, "lastLogoutTimestamp": null, "lastName": "TATA LIMITED", "lastUpdatedBy": null, "lastUpdatedTimestamp": null, "localAuthorityType": null, "locality": "BISTUPUR", "loginByAadhaarOtp": null, "logoutCapturedFlag": null, "mcaEntityId": "F02452", "mcaEntityType": "FOREIGN_COMPANY", "messages": null, "middleName": null, "name": "TATA LIMITED", "officeContactNumber": null, "officeCountryCode": null, "panStatus": "ACTIVE", "panType": "COMPANY", "panTypeDescription": null, "passportNumber": null, "passwordChangeTimestamp": null, "passwordResetOptions": null, "passwordResetTimestamp": null, "pincode": "831001", "primaryContactRelationCode": null, "primaryEmailRelationCode": null, "regenerationDate": null, "registrationDate": null, "residentialStatusCode": null, "sec5aFlag": null, "secAccessMessage": null, "secondaryContact": null, "secondaryContactRelationId": null, "secondaryEmailId": null, "secondaryEmailRelationId": null, "secondaryIsdCountryCode": null, "secondaryIsdCountryCodeDigits": null, "secondaryLoginOptions": null, "securedLogin": null, "signatories": [ { "pan": "AAVPH6348F", "panType": "PERSON", "accountNumber": null, "email": "en*****ia@tata.com", "emailDomain": "tata.com", "contact": "99XXXXXX99", "isAadhaarLinkedWithUserId": true, "isAadhaarMobileValidated": false, "isPanExempted": false, "isUidValidated": true, "isDscValid": false, "dtoService": "FP", "extAgencyType": null, "profileDate": null, "hsOptions": null, "role": "CO", "userType": "COM", "userCategory": "HS-1", "requestId": "FOS000999092567", "clientIp": "13.126.167.246", "remarks": "Y", "residentialStatus": null, "foreignEmail": null, "foreignEmailDomain": null, "dematAccountNumber": null, "pincode": null, "designation": null, "din": null, "dateOfBirth": null, "firstName": null, "gender": null, "name": null, "lastName": null, "middleName": null, "residentialStatusCode": null, "verificationStatus": null } ], "sourceIpAddress": null, "spouseName": null, "spousePan": null, "state": "JHARKHAND", "stateCode": null, "street": "ARMOURY ROAD", "timestamp": "2023-06-13 00:00:00.000Z", "transactionNumber": null, "trustType": null, "updatedByUser": null, "userGender": null, "userId": null, "yearMonthOfIssuance": null } ], "epf": [] }, "creditRatings": [], "alerts": { "alertList": [ { "alert": "isSuspendedAtStockExchange", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyStrikedOff", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyUnderStrikeOff", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyUnderLiquidation", "exists": false, "severity": "severe", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isChargeOpenAtArc_", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isChargeClosedAtArc_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isChargeOpenAtSasf_", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isChargeClosedAtSasf_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isShell", "exists": false, "severity": "severe", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isVanishing", "exists": false, "severity": "severe", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyStrikedOffUs248", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isDormant", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyUnderCirp", "exists": false, "severity": "high", "detailsAsPerSource": [] }, { "alert": "isMcaCompanyDefaulter", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isMlm", "exists": false, "severity": "severe", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isNotFiled5inv", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isCompanyActiveNonCompliant", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isAddressQualityPoor_", "exists": false, "severity": "low", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isEmailInvalid_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isEmailDisposable_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isDomainInvalid_", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isPep", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isFormerPep", "exists": false, "severity": "high", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "alert": "isDinSurrendered", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isDinDisqualified", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isDinDeactivated", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isDinDisabled", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isDinLapsed", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isMcaDirectorDefaulter", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isProclaimedOffender", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstCancelled", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstInactive", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstProvisional", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstUnderCancellation", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstTransactionDefault", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isGstTransactionDelay", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isIecCancelled", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isIecSuspended", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isIecBlackListed", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isIecInDeniedEntityList", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isTanInactive", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isTanTransactionDefault", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isTanTransactionDelay", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfClosed", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfUnderLiquidation", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfRegisteredWithBifr", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfTransactionDefault", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isEpfTransactionDelay", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isLeiRegistrationDuplicate", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isLeiRegistrationLapsed", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isLeiRegistrationRetired", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseSebiRelaxationForMps", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseCompanyDelisted", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseIlliquidSecurity", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBsePenalSuspended", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseCompanySuspendedMoreThan7Years", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseUnderGsmSurveillance", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseDisciplinaryAction", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseMemberInactive", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseDefaulter", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isBseExpelled", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseCompanyDelisted", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseCompanySuspendedNonCompliance", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseCompanySuspended", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseUnderGsmSurveillance", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseUnderAsmSurveillance", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseDefaulter", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseExpelled", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isNseSuspended", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditRatingDowngraded", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditRatingSuspended", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditRatingWithdrawn", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isRatedEntityNonCooperative", "severity": "high", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditRatingOutlookNegative", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditWatchWithDevelopingImplication", "severity": "low", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isCreditWatchWithNegativeImplication", "severity": "medium", "exists": false, "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null }, { "alert": "isPanInactive", "exists": false, "severity": "medium", "documentUrl": null, "lastUpdatedDate": null, "detailsAsPerSource": [] }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isBifr" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isIbbi" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isSebiDebarred" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isHawala" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isOffshoreLeak" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isDirectorResigned" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isCompanyUnderProsecution" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isMcaDirectorUnderProsecution" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isGstFraud" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isBankAuction" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isSfioProclaimedOffender" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isSfioConvictedDirector" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isBankDefaulterSuitFiled" }, { "severity": "severe", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isWilfulBankDefaulter" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isSickUnit" }, { "severity": "high", "lastUpdatedDate": null, "detailsAsPerSource": [], "documentUrl": null, "exists": false, "alert": "isBankDefaulterNonSuitFiled" } ], "alertSummary": { "severity": { "severe": 0, "high": 0, "medium": 0, "low": 0 }, "details": { "managementAlerts": [], "entityAlerts": {} } } }, "formerAlerts": null, "statutoryCompliance": { "tan": { "delays": [], "defaults": [] }, "epf": { "delays": [], "defaults": [] }, "gst": { "delays": [], "defaults": [] }, "mca": { "defaulter": [] } } }, "statusCode": 101 }';
      GenericMockClass mock= new GenericMockClass (200,'success',body);
      Test.setMock(HttpCalloutMock.class,mock);
      Account  acc = [SELECT Id,Name,MCA_ID__c FROM Account LIMIT 1];
      capIQButtontoUpdateClientMCA.updateAcountFromMCA(acc.Id ,'KCO000010573625R','Test Company');
      Test.stopTest();
   }
   @isTest static void testGetCapiqRegisteredCompanyMCA(){
      Test.startTest();
      String body ='{ "requestId": "47b692f3-73a9-4de2-bd56-4b370ec18fee", "result": [ { "kid": "KCO000010573625R", "name": "tata limited", "type": "COMPANY", "status": "ACTIVE", "pans": [ "AACCT3346H" ], "location": "Jamshedpur", "entityId": "F02452", "additionalEntityIds": [], "primaryName": "TATA LIMITED", "secondaryName": null, "score": 0.999 } ], "statusCode": 101 }';
      GenericMockClass mock= new GenericMockClass (200,'success',body);
      Test.setMock(HttpCalloutMock.class,mock);
      capIQButtontoUpdateClientMCA.getCapiqRegisteredCompanyMCA('KCO000010573625R');
      Test.stopTest();
   }

   @isTest static void testUpdateAccountCompanySearchCorpFinanceData(){
      Test.startTest();
      String body ='{ "requestId": "fa1d381a-6ab0-4732-a1b5-67826ac1e85a", "result": { "financial": [ { "data": { "signatories": { "signedFinStatements": [ { "dateSigningFS1": "2019-04-18", "dinPan1": "00256832", "directorName1": "SANJAY", "dtlsOfDsgtn1": "MANAGING DIRECTOR", "lastNameOfDirector": "PATTNAIK", "middleNameOfDirector": "KUMAR" } ] }, "current": { "balanceSheet": { "assets": { "bankBalanceOtherThanCashAndCashEquivalents": 1842038000, "biologicalAssetsOtherThanBearerPlants": null, "capWip": 73939000, "cashEqui": 1631933000, "currInv": 1209623000, "currentTaxAssets": null, "deferredTaxAssetsNet": 297373000, "goodwill": null, "intangAsset": 5911000, "intangAssetAud": null, "inventory": 1152769000, "investmentProperty": null, "investmentsAccountedForUsingEquityMethod": null, "loansCurrent": 22703000, "loansNonCurrent": 1128000, "nonCurrInv": 1226157000, "nonCurrentFinancialAssets": 1235930000, "noncurrentAssetsClassifiedAsHeldForSale": null, "othCurrAsset": 177113000, "othNonCurrAsset": 2482236000, "otherCurrentFinancialAssets": 129406000, "otherNonCurrentFinancialAssets": 8645000, "propertyPlantAndEquipment": 2197309000, "regulatoryDeferralAccountDebitBalancesAndRelatedDeferredTaxAssets": null, "totalAssets": 13242828000, "totalCurrentAssets": 6950130000, "totalCurrentFinancialAssets": 5620248000, "totalNonCurrentAssets": 6292698000, "tradeRec": 784545000, "tradeReceivablesNonCurrent": null }, "date": "2019-03-31", "equityLiabilities": { "borrowingsCurrent": 0, "borrowingsNonCurrent": 0, "currentFinancialLiabilities": 793532000, "currentLiabilties": 2107054000, "currentTaxLiabilities": 539033000, "deferredGovernmentGrantsCurrent": null, "deferredGovernmentGrantsNoncurrent": null, "deffTaxLiab": 182048000, "liabilitiesDirectlyAssociatedWithAssetsInDisposalGroupClassifiedAsHeldForSale": null, "nonControllingInterest": 0, "nonCurrentFinancialLiabilities": 0, "otherCurrentFinancialLiabilities": 42523000, "otherCurrentLiabilities": 224776000, "otherEquity": 10680723000, "otherNonCurrentFinancialLiabilities": null, "otherNonCurrentLiabilities": null, "provisionsCurrent": 549713000, "provisionsNonCurrent": 119003000, "regulatoryDeferralAccountCreditBalancesAndRelatedDeferredTaxLiability": null, "shareCap": 154000000, "totalEl": 13242828000, "totalEquity": 10834723000, "totalEquityAttributableToOwnersOfParent": 10834723000, "totalLiabilities": 2408105000, "totalNonCurrentLiabilities": 301051000, "tradePay": 751009000, "tradePayablesNoncurrent": null } }, "cashFlowStatement": { "cashFlowsFromUsedInOperatingActivities": { "adjustmentsForDecreaseIncreaseInInventories": -311882000, "shareOfProfitAndLossFromPartnershipFirmOrAssociationOfPersonsOrLimitedLiabilityPartnerships": 2517000 }, "effectOfExchangeRateChangesOnCashAndCashEquivalents": { "cashAndCashEquivalentsCashFlowStatementAtEndOfPeriod": 1631933000, "effectOfExchangeRateChangesOnCashAndCashEquivalents": null, "increaseDecreaseInCashAndCashEquivalents": 506995000 }, "whetherCashFlowStatementIsApplicableOnCompany": true }, "profitAndLoss": { "basicEarningsLossPerShareFromContinuingOperations": 0, "basicEarningsLossPerShareFromDiscontinuedOperations": 80.73, "currTax": 657500000, "deffTax": -23157000, "dilutedEarningsLossPerShareFromContinuingOperations": 80.73, "dilutedEarningsLossPerShareFromDiscontinuedOperations": null, "exceptionalItemsBeforeTax": null, "expenses": { "changesInInventoriesOfFinishedGoodsWorkInProgressAndStockInTrade": 1383000, "costMaterial": 7086877000, "deprcnAmort": 115790000, "empBenefitExp": 448675000, "expenditureOnProductionTransportationAndOtherExpenditurePertainingToExplorationAndProductionActivities": 0, "finCost": 30218000, "othExp": 936567000, "purchaseStock": null, "totExp": 8619510000 }, "extraordItem": null, "fromDate": "2018-04-01", "netMovementInRegulatoryDeferralAccountBalancesRelatedToProfitOrLossAndTheRelatedDeferredTaxMovement": null, "otherComprehensiveIncome": { "aggregatedIncomeTaxRelatingToComponentsOfOtherComprehensiveIncomeThatWillBeReclassifiedToProfitOrLoss": null, "whetherCompanyHasOtherComprehensiveIncomeOCIComponentsPresentedNetOfTax": true }, "profLossBefTax": 1877659000, "profitBfrExtr": null, "profitBfrExtrExcept": 1877659000, "profitLoss": 1243316000, "profitLossContOprtn": 1243316000, "profitLossFromDiscontinuedOperationsAfterTax": 0, "profitLossFromDiscontinuedOperationsBeforeTax": null, "profitOrLossAttributableToNonControllingInterests": null, "profitOrLossAttributableToOwnersOfParent": 1243316000, "revenue": { "otherIncome": 576639000, "revenueFromOperations": 9920530000, "salGoodsDom": null, "salGoodsExp": null, "salGoodsTrdDom": null, "salGoodsTrdExp": null, "salSuppServiceDom": null, "salSuppServiceExp": null, "totalRev": 10497169000 }, "shareOfProfitLossOfAssociates": null, "shareOfProfitLossOfAssociatesAndJointVenturesAccountedForUsingEquityMethod": null, "taxExpenseOfDiscontinuedOperations": 0, "toDate": "2019-03-31", "totalBasicEarningsLossPerShare": 80.73, "totalDilutedEarningsLossPerShare": 80.73, "totalTaxExpense": 634343000 }, "ratios": { "cashConversionCycle": 40.01968628325947, "cashFlowCoverage": 0.41635975175501067, "cashFlowMargin": 0.10106697928437292, "cashRatio": 0.7745093386310935, "currentLiabilityCoverage": 0.47584826966940574, "currentRatio": 3.2985058759766006, "daysOfInventoryOutstanding": 51.330258765903054, "daysOfPayablesOutstanding": 36.561097152192495, "daysOfSalesOutstanding": 25.250524669548906, "daysWorkingCapital": 184.99525982986796, "debtCapital": 0, "debtEquity": 0, "debtToEbitda": 0, "ebitdaCoverage": 47.88629293798398, "ebitdaMargin": 0.1458619650361422, "equityMultiplier": 1.2222581047988028, "grossProfitMargin": 0.28549583540395523, "interestCoverage": 44.05447084519161, "inventoryTurnover": 7.11081550678753, "longTermDebtCoverage": null, "netProfitMargin": 0.12532757826446772, "netSalesGrowth": null, "netWorthGrowth": 0.0983817336526004, "operatingProfitMargin": 0.1341902095956567, "payablesTurnover": 9.983289026601645, "quickRatio": 2.751405991493336, "receivablesTurnover": 14.455145181207858, "returnOnAssets": 0.09795581999618676, "returnOnEquity": 0.12013305194752805, "totalAssetTurnover": 0.7815982830967917, "totalAssetsGrowth": 0.09062581635345597, "totalLiabilitiesGrowth": null, "workingCapitalTurnover": 1.9730235268496854 } }, "AuditorProfile":[{ "nameOfAuditor": "9" } ], "principalProduct": { "disclosureOfPrincipalProductOrService": [ { "descriptionOfProductOrService": "Sponge Iron", "descriptionOfProductOrServiceCategory": "Sponge Iron", "highestTurnoverContributingProductOrServiceITC8DigitCode": "72031000", "productOrServiceCategoryITC4DigitCode": "7203", "quantityOfHighestContributingProductOrServiceInUom": null, "turnoverOfHighestContributingProductOrService": 9406000, "turnoverOfProductOrServiceCategory": 9406000, "unitOfMeasurementOfHighestContributingProductOrService": null } ] }, "statementOfSolvency": null, "financialStartDate": "2018-04-01", "financialEndDate": "2019-03-31" }, "metadata": { "companyID": "L27102OR1982PLC001091", "categoryCode": "ARBE", "documentName": "Form AOC-4(XBRL)-13082019_signed", "dateOfFiling": "13-08-2019", "formId": "AOC 4 IND AS", "type": "FINANCIAL", "docId": "612a0348f36efc0001136296", "lastUpdated": "28-08-2021 17:45:24", "docLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWUVVOVpTeXM4VzFYWEpPNmdrOG5TSldzV25sNExhN2Vkc1hZUm1HU1hoMVlXMWxjS1lnaTc4L0c1cWFRNUhMSmpBWG4rVHhadWpQOWkzc2NESzd1VVRSZkNJQzFkbWh5OUpMVW1SS1JyWHdZTit1NEtCSWxsZGhOSmRCRnlqOHhvR0VLRDQ0VU9ROWFiWWpySFF0VThrc1BBNW4xNGlMYzZTMzJ4dEZ0RlBGL1pRQm1JckRneGNDeDdGcjJ1SVhwRDM5cks1b2ptOVFEY0NzWWRMZzhOMmNKQ0owelQzV3NZVGlIeE5kK2tEaFlMbElDVk1KUEdSYTJzUy9YL21Va3c2NmZrNVJVZmdDU0VmQ0FSNmxNc0U=", "excelLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWkdubDRkenUxNlBFTEVneXpFZGpkZmNzZEwwTlhyZVFTckwvdCtNcGljamRlY0FUeUJ5aUNxc3hob1NMSGlmNjE0VFFtRGRhYzI0SVp6N1U2TTd3RThaUW9SejRKeE4ydG5IN3BkUEx1MEFtSmJPRmhrQksxcTRUM0FzMWtCRnpkTFBSSFp0SGVSNkxpNkRFQlN5RGMwQXBFTXZSZk0vUEVjdXcyMjBNdTRjTHNFaWVaU0U2eFZsTTluTWtDajRqRWZ1N0ZXbWVULzJReGd2UXNaSEZpVmUxbk9NcEhmSmU0cnZUSWVDYlIrYkxvR3VHVlVyRHRJQ05idkxocVFOODZLYnd0V2tuZktlVmU2eGFFeE4xTStTSzVpRTlPdE5kVkQ3OHZva0ZXOTFhR1F4MC9DeUtnYUJ6MXNVSUZ6SWNZPQ==", "attachmentLink": "https://download.karza.in/mca-docs/MGlRQ1F1NXNOb0dxSk90SVJqdmxJcFVza3JHZkJkczZrVTdrZGhpN0lyWmJGY3lpNFFCSHlHbWtPT3MyUVNpeGljbWdybEd1K2FoOVJXc0RVcjVpQmVzaWpLTXZ6L0xhVHI0K0N3ZHRzUGNwSllRM3FDZ2V6WFVSd1ZkYzhneEIySUJ1dzM4Y1p6T2F6bFB1OWJCcXhITnQ5eDlWeTFRcHY2M0ZzZ0NUNXhBbDVCUHlhaUxSY0xSRU82WSt5MkI4dnVDQ1JGQ0QvdUZRT2dUU1lBd01vK251aWhEbGJENm9JU25ERnlXNStlSXVPRmh3TUVNbmMyVVpYbjdodlczUWhSY1pKME9TRXlEeHkwQ1VmbUovZ1k4Ky9zNGpHYmY2YS9GSytwWDI2Zzh3QTZBUjFoM2ltNC8yY1R6UlZuUnEzUUZDT2x3S3FCTVJUK0hUNXBtMEt3PT0=" } } ], "consolidatedFinancial": [], "companyName": "TATA SPONGE IRON LIMITED", "entityId": "L27102OR1982PLC001091", "lastDownloaded": "27-10-2023", "mergedFinancials": "https://download.karza.in/mca/ZFhUajljdSsvbGxYZ243SXBhNTFDZGNKMXJKQi85RHlQK2RzNmV1ZStPcmRQK1AxRlp5RVVlQUdQQko1UjQ4dmpaN3k5YmU2di9BMURJYWdyM29XWVFQaTcyaHdpS09SdGFmMUNRdXFSUXhUTm9CY3FnakJHQnpTK21Jbit6U2E0eENZemVLcGxJMmhCbXRhQUMwMDltdTBUc3NCbVdQdE5xQ0ZGbjd1Tm1iYkxkNHVOUWZYOFQxNU1tT3ROSUhROTg0K3RUK0FpU3BFTGVJd0o3b1YzTlRYbk5KQjJoUytadXR4MGZZeFZadklySkJaRU5vaGZZY2N4bndpUGROL0xuRi9yRUNmOFh4dkt0eU1qQndRbkE9PQ==" }, "statusCode": 101 }';
      GenericMockClass mock= new GenericMockClass (200,'success',body);
      Test.setMock(HttpCalloutMock.class,mock);
      Account  acc = [SELECT Id,Name,MCA_ID__c FROM Account LIMIT 1];
      capIQButtontoUpdateClientMCA.updateAccountCompanySearchCorpFinanceData(acc.Id,'L27102OR1982PLC001091');
      Test.stopTest();
  }

    
}